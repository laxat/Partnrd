{"ast":null,"code":"import _defineProperty from\"C:/xampp/htdocs/Partnr/partnrd/partnrd_frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _regeneratorRuntime from\"C:/xampp/htdocs/Partnr/partnrd/partnrd_frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/xampp/htdocs/Partnr/partnrd/partnrd_frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/xampp/htdocs/Partnr/partnrd/partnrd_frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _objectSpread from\"C:/xampp/htdocs/Partnr/partnrd/partnrd_frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import React,{useState,useEffect}from\"react\";import axios from\"axios\";import{Row}from\"simple-flexbox\";import{useHistory}from\"react-router-dom\";import{createUseStyles,useTheme}from\"react-jss\";import DropdownComponent from\"../Dropdown/DropdownComponent\";import SLUGS from\"../../resources/slugs\";import{convertSlugUrl}from\"../../resources/utils\";import Gravatar from\"react-gravatar\";import KeyboardArrowDownIcon from\"@material-ui/icons/KeyboardArrowDown\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var useStyles=createUseStyles(function(theme){return{avatar:{display:\"block\",overflow:\"hidden\",textOverflow:\"ellipsis\",height:35,width:35,minWidth:35,borderRadius:50,marginRight:10,border:\"1px solid rgb(0 0 0 / 15%)\",\"@media (max-width: 768px)\":{marginLeft:7}},container:{height:70,backgroundColor:\"#FFFFFF\",width:\"100vw\",position:\"absolute\",top:0,right:0,boxShadow:\"0 1px 0 rgb(0 0 0 / 15%)\"},name:_objectSpread(_objectSpread({},theme.typography.itemTitle),{},{textAlign:\"right\",\"@media (max-width: 768px)\":{display:\"none\"},marginRight:10}),icon:_objectSpread(_objectSpread({},theme.typography.itemTitle),{},{textAlign:\"right\",\"@media (max-width: 768px)\":{display:\"none\"},marginRight:32,color:\"rgb(0 0 0 / 30%)\"}),title:_objectSpread(_objectSpread({},theme.typography.title),{},{\"@media (max-width: 1080px)\":{marginLeft:70},\"@media (max-width: 468px)\":{fontSize:20},paddingLeft:40}),iconStyles:{cursor:\"pointer\",marginLeft:25,\"@media (max-width: 768px)\":{marginLeft:12}}};});function HeaderComponent(){var theme=useTheme();var _useHistory=useHistory(),push=_useHistory.push;var classes=useStyles({theme:theme});var _useState=useState([]),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setUser=_useState2[1];function _onClick(slug){var parameters=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};push(convertSlugUrl(slug,parameters));}var token=sessionStorage.getItem(\"xrsf\");var api=process.env.REACT_APP_API+\"/api/user\";var config={headers:{Authorization:\"Bearer \".concat(token)}};useEffect(function(){getUser();},[]);var getUser=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get(api,config).then(function(res){console.log(res.data);setUser(res.data);}).catch(function(err){console.log(err);});case 2:case\"end\":return _context.stop();}}},_callee);}));return function getUser(){return _ref.apply(this,arguments);};}();function logout(){return _logout.apply(this,arguments);}function _logout(){_logout=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:sessionStorage.clear();localStorage.clear();_onClick(SLUGS.login);case 3:case\"end\":return _context2.stop();}}},_callee2);}));return _logout.apply(this,arguments);}return/*#__PURE__*/_jsxs(Row,{className:classes.container,vertical:\"center\",horizontal:\"space-between\",children:[/*#__PURE__*/_jsx(\"span\",{className:classes.title}),/*#__PURE__*/_jsx(Row,{vertical:\"center\",children:/*#__PURE__*/_jsx(DropdownComponent,{label:/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Gravatar,_defineProperty({email:user.email,size:100,rating:\"pg\",default:\"retro\",className:\"CustomAvatar-image\",style:{margin:\"10px\"},protocol:\"https://\"},\"className\",classes.avatar)),/*#__PURE__*/_jsx(\"span\",{className:classes.name,children:user.name}),/*#__PURE__*/_jsx(\"span\",{className:classes.icon,children:/*#__PURE__*/_jsx(KeyboardArrowDownIcon,{})})]}),options:[{label:\"Edit Profile\",onClick:function onClick(){return _onClick(SLUGS.profileSettings);}},{label:\"Logout\",onClick:function onClick(){return logout();}}],position:{top:52,right:20}})})]});}export default HeaderComponent;","map":{"version":3,"sources":["C:/xampp/htdocs/Partnr/partnrd/partnrd_frontend/src/components/Header/HeaderComponent.js"],"names":["React","useState","useEffect","axios","Row","useHistory","createUseStyles","useTheme","DropdownComponent","SLUGS","convertSlugUrl","Gravatar","KeyboardArrowDownIcon","useStyles","theme","avatar","display","overflow","textOverflow","height","width","minWidth","borderRadius","marginRight","border","marginLeft","container","backgroundColor","position","top","right","boxShadow","name","typography","itemTitle","textAlign","icon","color","title","fontSize","paddingLeft","iconStyles","cursor","HeaderComponent","push","classes","user","setUser","onClick","slug","parameters","token","sessionStorage","getItem","api","process","env","REACT_APP_API","config","headers","Authorization","getUser","get","then","res","console","log","data","catch","err","logout","clear","localStorage","login","email","margin","label","profileSettings"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport axios from \"axios\";\r\nimport { string } from \"prop-types\";\r\nimport { Row } from \"simple-flexbox\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { createUseStyles, useTheme } from \"react-jss\";\r\nimport DropdownComponent from \"../Dropdown/DropdownComponent\";\r\nimport SLUGS from \"../../resources/slugs\";\r\nimport { convertSlugUrl } from \"../../resources/utils\";\r\nimport Gravatar from \"react-gravatar\";\r\nimport KeyboardArrowDownIcon from \"@material-ui/icons/KeyboardArrowDown\";\r\n\r\nconst useStyles = createUseStyles((theme) => ({\r\n  avatar: {\r\n    display: \"block\",\r\n    overflow: \"hidden\",\r\n    textOverflow: \"ellipsis\",\r\n    height: 35,\r\n    width: 35,\r\n    minWidth: 35,\r\n    borderRadius: 50,\r\n    marginRight: 10,\r\n    border: `1px solid rgb(0 0 0 / 15%)`,\r\n    \"@media (max-width: 768px)\": {\r\n      marginLeft: 7,\r\n    },\r\n  },\r\n  container: {\r\n    height: 70,\r\n    backgroundColor: \"#FFFFFF\",\r\n    width: \"100vw\",\r\n    position: \"absolute\",\r\n    top: 0,\r\n    right: 0,\r\n    boxShadow: \"0 1px 0 rgb(0 0 0 / 15%)\",\r\n  },\r\n  name: {\r\n    ...theme.typography.itemTitle,\r\n    textAlign: \"right\",\r\n    \"@media (max-width: 768px)\": {\r\n      display: \"none\",\r\n    },\r\n    marginRight: 10,\r\n  },\r\n  icon: {\r\n    ...theme.typography.itemTitle,\r\n    textAlign: \"right\",\r\n    \"@media (max-width: 768px)\": {\r\n      display: \"none\",\r\n    },\r\n    marginRight: 32,\r\n    color: \"rgb(0 0 0 / 30%)\",\r\n  },\r\n  title: {\r\n    ...theme.typography.title,\r\n    \"@media (max-width: 1080px)\": {\r\n      marginLeft: 70,\r\n    },\r\n    \"@media (max-width: 468px)\": {\r\n      fontSize: 20,\r\n    },\r\n    paddingLeft: 40,\r\n  },\r\n  iconStyles: {\r\n    cursor: \"pointer\",\r\n    marginLeft: 25,\r\n    \"@media (max-width: 768px)\": {\r\n      marginLeft: 12,\r\n    },\r\n  },\r\n}));\r\n\r\nfunction HeaderComponent() {\r\n  const theme = useTheme();\r\n  const { push } = useHistory();\r\n  const classes = useStyles({ theme });\r\n  const [user, setUser] = useState([]);\r\n\r\n  function onClick(slug, parameters = {}) {\r\n    push(convertSlugUrl(slug, parameters));\r\n  }\r\n\r\n  const token = sessionStorage.getItem(\"xrsf\");\r\n  const api = process.env.REACT_APP_API + `/api/user`;\r\n  const config = {\r\n    headers: { Authorization: `Bearer ${token}` },\r\n  };\r\n\r\n  useEffect(() => {\r\n    getUser();\r\n  }, []);\r\n\r\n  const getUser = async () => {\r\n    await axios\r\n      .get(api, config)\r\n      .then((res) => {\r\n        console.log(res.data);\r\n        setUser(res.data);\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  };\r\n\r\n  async function logout() {\r\n    sessionStorage.clear();\r\n    localStorage.clear();\r\n    onClick(SLUGS.login);\r\n  }\r\n  return (\r\n    <Row\r\n      className={classes.container}\r\n      vertical=\"center\"\r\n      horizontal=\"space-between\"\r\n    >\r\n      <span className={classes.title}></span>\r\n      <Row vertical=\"center\">\r\n        <DropdownComponent\r\n          label={\r\n            <>\r\n              <Gravatar\r\n                email={user.email}\r\n                size={100}\r\n                rating=\"pg\"\r\n                default=\"retro\"\r\n                className=\"CustomAvatar-image\"\r\n                style={{ margin: \"10px\" }}\r\n                protocol=\"https://\"\r\n                className={classes.avatar}\r\n              />\r\n              <span className={classes.name}>{user.name}</span>\r\n              <span className={classes.icon}>\r\n                <KeyboardArrowDownIcon />\r\n              </span>\r\n            </>\r\n          }\r\n          options={[\r\n            {\r\n              label: \"Edit Profile\",\r\n              onClick: () => onClick(SLUGS.profileSettings),\r\n            },\r\n\r\n            {\r\n              label: \"Logout\",\r\n              onClick: () => logout(),\r\n            },\r\n          ]}\r\n          position={{\r\n            top: 52,\r\n            right: 20,\r\n          }}\r\n        />\r\n      </Row>\r\n    </Row>\r\n  );\r\n}\r\n\r\nHeaderComponent.propTypes = {\r\n  title: string,\r\n};\r\n\r\nexport default HeaderComponent;\r\n"]},"metadata":{},"sourceType":"module"}