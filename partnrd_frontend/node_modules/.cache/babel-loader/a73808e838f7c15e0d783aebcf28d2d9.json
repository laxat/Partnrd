{"ast":null,"code":"\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.convertNode = exports.convertElementStyle = exports.convertStylesheet = exports.convertRule = void 0;\n\nconst node_html_parser_1 = require(\"node-html-parser\");\n\nconst css_1 = __importDefault(require(\"css\"));\n\nconst supportedStyles_1 = __importDefault(require(\"./supportedStyles\"));\n\nconst camelize = require('camelize');\n\nconst convertRule = (rule, source = 'style') => {\n  var _a;\n\n  const declarations = ((_a = rule.declarations) === null || _a === void 0 ? void 0 : _a.filter(declaration => declaration.type === 'declaration')) || [];\n  return declarations.map(entry => Object.assign(Object.assign({}, entry), {\n    property: camelize(entry.property)\n  })).reduce((style, {\n    property,\n    value\n  }) => {\n    if (property && value) {\n      if (!property || !supportedStyles_1.default.includes(property)) {\n        if (property === 'background' && /^#?[a-zA-Z0-9]+$/.test(value) || /^rgba?\\([0-9, ]+\\)$/i.test(value) || /^hsla?\\([0-9.%, ]+\\)$/i.test(value)) {\n          property = 'backgroundColor';\n        } else {\n          console.warn(`${source}: Found unsupported style \"${property}\"`, {\n            property,\n            value\n          });\n        }\n      }\n\n      style[property] = value;\n    }\n\n    return style;\n  }, {});\n};\n\nexports.convertRule = convertRule;\n\nconst convertStylesheet = stylesheet => {\n  var _a, _b;\n\n  const response = {};\n\n  try {\n    const parsed = css_1.default.parse(stylesheet);\n    const rules = ((_b = (_a = parsed.stylesheet) === null || _a === void 0 ? void 0 : _a.rules) === null || _b === void 0 ? void 0 : _b.filter(rule => rule.type === 'rule')) || [];\n    rules.forEach(rule => {\n      var _a;\n\n      const style = exports.convertRule(rule);\n      (_a = rule.selectors) === null || _a === void 0 ? void 0 : _a.forEach(selector => {\n        response[selector] = style;\n      });\n    });\n  } catch (e) {\n    console.error(`Error parsing stylesheet: \"${stylesheet}\"`, e);\n  }\n\n  return response;\n};\n\nexports.convertStylesheet = convertStylesheet;\n\nconst convertElementStyle = (styleAttr, tag) => {\n  var _a, _b;\n\n  try {\n    const parsed = css_1.default.parse(`${tag} { ${styleAttr} }`, {\n      source: tag\n    });\n    const rules = ((_b = (_a = parsed.stylesheet) === null || _a === void 0 ? void 0 : _a.rules) === null || _b === void 0 ? void 0 : _b.filter(rule => rule.type === 'rule')) || [];\n    const firstRule = rules.shift();\n    return firstRule ? exports.convertRule(firstRule, tag) : undefined;\n  } catch (e) {\n    console.error(`Error parsing style attribute \"${styleAttr}\" for tag: ${tag}`, e);\n  }\n};\n\nexports.convertElementStyle = convertElementStyle;\n\nconst convertNode = node => {\n  if (node.nodeType === node_html_parser_1.NodeType.TEXT_NODE) {\n    return node.rawText;\n  }\n\n  if (node.nodeType === node_html_parser_1.NodeType.COMMENT_NODE) {\n    return '';\n  }\n\n  if (node.nodeType !== node_html_parser_1.NodeType.ELEMENT_NODE) {\n    throw new Error('Not sure what this is');\n  }\n\n  const html = node;\n  const content = html.childNodes.map(exports.convertNode);\n  const kindCounters = {};\n  content.forEach(child => {\n    if (typeof child !== 'string') {\n      child.indexOfType = child.tag in kindCounters ? kindCounters[child.tag] = kindCounters[child.tag] + 1 : kindCounters[child.tag] = 0;\n    }\n  });\n  let style;\n\n  if (html.attributes.style && html.attributes.style.trim()) {\n    style = exports.convertElementStyle(html.attributes.style, html.tagName);\n  }\n\n  return Object.assign(html, {\n    tag: (html.tagName || '').toLowerCase(),\n    style: style ? [style] : [],\n    content,\n    indexOfType: 0\n  });\n};\n\nexports.convertNode = convertNode;\n\nconst parseHtml = text => {\n  const html = node_html_parser_1.parse(text, {\n    comment: false\n  });\n  const stylesheets = html.querySelectorAll('style').map(styleNode => styleNode.childNodes.map(textNode => textNode.rawText.trim()).join('\\n')).filter(styleText => !!styleText).map(exports.convertStylesheet);\n  return {\n    stylesheets,\n    rootElement: exports.convertNode(html)\n  };\n};\n\nexports.default = parseHtml;","map":{"version":3,"sources":["C:/xampp/htdocs/Partnr/partnrd/partnrd_frontend/node_modules/react-pdf-html/dist/parse.js"],"names":["__importDefault","mod","__esModule","Object","defineProperty","exports","value","convertNode","convertElementStyle","convertStylesheet","convertRule","node_html_parser_1","require","css_1","supportedStyles_1","camelize","rule","source","_a","declarations","filter","declaration","type","map","entry","assign","property","reduce","style","default","includes","test","console","warn","stylesheet","_b","response","parsed","parse","rules","forEach","selectors","selector","e","error","styleAttr","tag","firstRule","shift","undefined","node","nodeType","NodeType","TEXT_NODE","rawText","COMMENT_NODE","ELEMENT_NODE","Error","html","content","childNodes","kindCounters","child","indexOfType","attributes","trim","tagName","toLowerCase","parseHtml","text","comment","stylesheets","querySelectorAll","styleNode","textNode","join","styleText","rootElement"],"mappings":"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","sourcesContent":["\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.convertNode = exports.convertElementStyle = exports.convertStylesheet = exports.convertRule = void 0;\nconst node_html_parser_1 = require(\"node-html-parser\");\nconst css_1 = __importDefault(require(\"css\"));\nconst supportedStyles_1 = __importDefault(require(\"./supportedStyles\"));\nconst camelize = require('camelize');\nconst convertRule = (rule, source = 'style') => {\n    var _a;\n    const declarations = ((_a = rule.declarations) === null || _a === void 0 ? void 0 : _a.filter((declaration) => declaration.type === 'declaration')) || [];\n    return declarations\n        .map((entry) => (Object.assign(Object.assign({}, entry), { property: camelize(entry.property) })))\n        .reduce((style, { property, value }) => {\n        if (property && value) {\n            if (!property || !supportedStyles_1.default.includes(property)) {\n                if ((property === 'background' && /^#?[a-zA-Z0-9]+$/.test(value)) ||\n                    /^rgba?\\([0-9, ]+\\)$/i.test(value) ||\n                    /^hsla?\\([0-9.%, ]+\\)$/i.test(value)) {\n                    property = 'backgroundColor';\n                }\n                else {\n                    console.warn(`${source}: Found unsupported style \"${property}\"`, {\n                        property,\n                        value,\n                    });\n                }\n            }\n            style[property] = value;\n        }\n        return style;\n    }, {});\n};\nexports.convertRule = convertRule;\nconst convertStylesheet = (stylesheet) => {\n    var _a, _b;\n    const response = {};\n    try {\n        const parsed = css_1.default.parse(stylesheet);\n        const rules = ((_b = (_a = parsed.stylesheet) === null || _a === void 0 ? void 0 : _a.rules) === null || _b === void 0 ? void 0 : _b.filter((rule) => rule.type === 'rule')) || [];\n        rules.forEach((rule) => {\n            var _a;\n            const style = exports.convertRule(rule);\n            (_a = rule.selectors) === null || _a === void 0 ? void 0 : _a.forEach((selector) => {\n                response[selector] = style;\n            });\n        });\n    }\n    catch (e) {\n        console.error(`Error parsing stylesheet: \"${stylesheet}\"`, e);\n    }\n    return response;\n};\nexports.convertStylesheet = convertStylesheet;\nconst convertElementStyle = (styleAttr, tag) => {\n    var _a, _b;\n    try {\n        const parsed = css_1.default.parse(`${tag} { ${styleAttr} }`, {\n            source: tag,\n        });\n        const rules = ((_b = (_a = parsed.stylesheet) === null || _a === void 0 ? void 0 : _a.rules) === null || _b === void 0 ? void 0 : _b.filter((rule) => rule.type === 'rule')) || [];\n        const firstRule = rules.shift();\n        return firstRule ? exports.convertRule(firstRule, tag) : undefined;\n    }\n    catch (e) {\n        console.error(`Error parsing style attribute \"${styleAttr}\" for tag: ${tag}`, e);\n    }\n};\nexports.convertElementStyle = convertElementStyle;\nconst convertNode = (node) => {\n    if (node.nodeType === node_html_parser_1.NodeType.TEXT_NODE) {\n        return node.rawText;\n    }\n    if (node.nodeType === node_html_parser_1.NodeType.COMMENT_NODE) {\n        return '';\n    }\n    if (node.nodeType !== node_html_parser_1.NodeType.ELEMENT_NODE) {\n        throw new Error('Not sure what this is');\n    }\n    const html = node;\n    const content = html.childNodes.map(exports.convertNode);\n    const kindCounters = {};\n    content.forEach((child) => {\n        if (typeof child !== 'string') {\n            child.indexOfType =\n                child.tag in kindCounters\n                    ? (kindCounters[child.tag] = kindCounters[child.tag] + 1)\n                    : (kindCounters[child.tag] = 0);\n        }\n    });\n    let style;\n    if (html.attributes.style && html.attributes.style.trim()) {\n        style = exports.convertElementStyle(html.attributes.style, html.tagName);\n    }\n    return Object.assign(html, {\n        tag: (html.tagName || '').toLowerCase(),\n        style: style ? [style] : [],\n        content,\n        indexOfType: 0,\n    });\n};\nexports.convertNode = convertNode;\nconst parseHtml = (text) => {\n    const html = node_html_parser_1.parse(text, { comment: false });\n    const stylesheets = html\n        .querySelectorAll('style')\n        .map((styleNode) => styleNode.childNodes.map((textNode) => textNode.rawText.trim()).join('\\n'))\n        .filter((styleText) => !!styleText)\n        .map(exports.convertStylesheet);\n    return {\n        stylesheets,\n        rootElement: exports.convertNode(html),\n    };\n};\nexports.default = parseHtml;\n//# sourceMappingURL=parse.js.map"]},"metadata":{},"sourceType":"script"}