{"ast":null,"code":"import _defineProperty from\"C:/xampp/htdocs/Partnr/partnrd/partnrd_frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"C:/xampp/htdocs/Partnr/partnrd/partnrd_frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"C:/xampp/htdocs/Partnr/partnrd/partnrd_frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/xampp/htdocs/Partnr/partnrd/partnrd_frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/xampp/htdocs/Partnr/partnrd/partnrd_frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import axios from\"axios\";import{Column,Row}from\"simple-flexbox\";import{createUseStyles}from\"react-jss\";import CreateButton from\"../../components/CreateButton\";import Gravatar from\"react-gravatar\";import{FormGroup,Input}from\"reactstrap\";import{get}from\"react-hook-form\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var useStyles=createUseStyles({container:{width:\"100%\",maxWidth:\"1300px\",marginLeft:\"auto\",marginRight:\"auto\"},avatar:{display:\"block\",overflow:\"hidden\",textOverflow:\"ellipsis\",height:50,width:50,minWidth:50,borderRadius:50,marginRight:5,border:\"1px solid rgb(0 0 0 / 15%)\"// \"@media (max-width: 768px)\": {\n//   marginLeft: 7,\n// },\n},name:{fontSize:26,textAlign:\"right\",marginRight:5,marginLeft:5},formControl:{border:\"1px solid #d5dae2\",padding:\"15px 20px\",marginBottom:\"20px\",minHeight:\"15px\",fontSize:\"13px\",fontWeight:\"normal\",width:350},buttonRow:{marginTop:10,\"@media (max-width: 768px)\":{marginTop:0}},lastRow:{marginTop:30},rowC:{display:\"flex\",flexDirection:\"row\",width:\"100%\",alignItems:\"center\"},profile:{maxWidth:\"800px\",margin:\"auto\",marginTop:\"20px\"},rowLast:{display:\"block !important\",width:\"100%\"},customRow:{display:\"grid !important\",gridTemplateColumns:\"80% 20%\",\"@media (max-width: 780px)\":{display:\"block !important\",gridTemplateColumns:\"unset\"}},formGroupList:{display:\"grid !important\",gridTemplateColumns:\"1fr 1fr\",gridGap:\"15px\",\"@media (max-width: 780px)\":{display:\"block !important\",gridTemplateColumns:\"unset\"}}});function ProfileSettings(){var classes=useStyles();var _useState=useState([]),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setUser=_useState2[1];var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),values=_useState4[0],setValues=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isLoading=_useState6[0],setIsLoading=_useState6[1];var _useState7=useState({error:false,message:\"\"}),_useState8=_slicedToArray(_useState7,2),response=_useState8[0],setResponse=_useState8[1];useEffect(function(){getUser();},[]);var token=sessionStorage.getItem(\"xrsf\");var api=\"http://localhost:8000/api/user\";var config={headers:{Authorization:\"Bearer \".concat(token)}};var getUser=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setIsLoading(true);_context.next=3;return axios.get(api,config).then(function(res){console.log(res.data);var response={errors:false,message:\"Profile Successfully Updated\"};setUser(res.data);setResponse(response);setIsLoading(false);}).catch(function(err){console.log(err);setIsLoading(false);});case 3:case\"end\":return _context.stop();}}},_callee);}));return function getUser(){return _ref.apply(this,arguments);};}();var putApi=\"http://localhost:8000/api/users/\".concat(user.id);var handleSubmit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:e.preventDefault();_context2.next=3;return axios.put(putApi,values).then(function(res){console.log(res.data);setValues({password:\"\",new_password:\"\",conf_password:\"\"});getUser();}).catch(function(err){var error=err.response.data;if(error.type===\"password\"){if(error.errors.conf_password){setResponse({error:true,message:error.errors.conf_password[0]});}if(error.errors.new_password){setResponse({error:true,message:error.errors.new_password[0]});}if(error.errors.password){setResponse({error:true,message:error.errors.password[0]});}}if(error.type===\"email\"){setResponse({error:true,message:error.errors});}else{setResponse({error:true,message:error.errors});}});case 3:case\"end\":return _context2.stop();}}},_callee2);}));return function handleSubmit(_x){return _ref2.apply(this,arguments);};}();var handleInput=function handleInput(e){var _e$target=e.target,name=_e$target.name,value=_e$target.value;setValues(_objectSpread(_objectSpread({},values),{},_defineProperty({},name,value)));setResponse({});};return!isLoading?/*#__PURE__*/_jsxs(\"div\",{className:classes.rowLast,children:[/*#__PURE__*/_jsxs(Row,{className:classes.customRow,children:[/*#__PURE__*/_jsx(Column,{children:/*#__PURE__*/_jsxs(\"div\",{className:classes.rowC,children:[/*#__PURE__*/_jsx(Gravatar,_defineProperty({email:user.email,size:100,rating:\"pg\",default:\"retro\",className:\"CustomAvatar-image\",protocol:\"https://\"},\"className\",classes.avatar)),/*#__PURE__*/_jsx(\"span\",{className:classes.name,children:user.name})]})}),/*#__PURE__*/_jsx(Column,{className:classes.container,vertical:\"center\",horizontal:\"end\",children:/*#__PURE__*/_jsx(CreateButton,{form:\"profile-form\",label:\"Update Profile\"})})]}),/*#__PURE__*/_jsxs(Row,{className:classes.rowLast,children:[/*#__PURE__*/_jsx(Input,{type:\"hidden\",value:\"prayer\"}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"form\",{id:\"profile-form\",className:classes.profile,onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Update Profile\"}),response.error&&/*#__PURE__*/_jsx(\"p\",{children:response.message}),!response.error&&/*#__PURE__*/_jsx(\"p\",{children:response.message}),/*#__PURE__*/_jsxs(FormGroup,{children:[/*#__PURE__*/_jsxs(\"div\",{className:classes.formGroupList,children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Full Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"hidden\",value:\"something\"}),/*#__PURE__*/_jsx(Input,{type:\"text\",name:\"name\",autoComplete:\"off\",defaultValue:user.name,onChange:handleInput})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Email\"}),/*#__PURE__*/_jsx(Input,{type:\"email\",name:\"email\",autoComplete:\"user-email\",defaultValue:user.email,onChange:handleInput})]})]}),/*#__PURE__*/_jsx(\"label\",{children:\"Current Password\"}),/*#__PURE__*/_jsx(Input,{required:true,type:\"password\",name:\"password\",value:values.password,autoComplete:\"old-password\",onChange:handleInput}),/*#__PURE__*/_jsxs(\"div\",{className:classes.formGroupList,children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"New Password\"}),/*#__PURE__*/_jsx(Input,{type:\"password\",name:\"new_password\",autoComplete:\"new-password\",value:values.new_password,onChange:handleInput})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Repeat Password\"}),/*#__PURE__*/_jsx(Input,{type:\"password\",name:\"conf_password\",autoComplete:\"conf-password\",value:values.conf_password,onChange:handleInput})]})]})]})]})})]})]}):/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"});}export default ProfileSettings;","map":{"version":3,"sources":["C:/xampp/htdocs/Partnr/partnrd/partnrd_frontend/src/pages/Settings/ProfileSettings.js"],"names":["React","useState","useEffect","axios","Column","Row","createUseStyles","CreateButton","Gravatar","FormGroup","Input","get","useStyles","container","width","maxWidth","marginLeft","marginRight","avatar","display","overflow","textOverflow","height","minWidth","borderRadius","border","name","fontSize","textAlign","formControl","padding","marginBottom","minHeight","fontWeight","buttonRow","marginTop","lastRow","rowC","flexDirection","alignItems","profile","margin","rowLast","customRow","gridTemplateColumns","formGroupList","gridGap","ProfileSettings","classes","user","setUser","values","setValues","isLoading","setIsLoading","error","message","response","setResponse","getUser","token","sessionStorage","getItem","api","config","headers","Authorization","then","res","console","log","data","errors","catch","err","putApi","id","handleSubmit","e","preventDefault","put","password","new_password","conf_password","type","handleInput","target","value","email"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport axios from \"axios\";\r\nimport { Column, Row } from \"simple-flexbox\";\r\nimport { createUseStyles } from \"react-jss\";\r\nimport CreateButton from \"../../components/CreateButton\";\r\nimport Gravatar from \"react-gravatar\";\r\nimport { FormGroup, Input } from \"reactstrap\";\r\nimport { get } from \"react-hook-form\";\r\n\r\nconst useStyles = createUseStyles({\r\n  container: {\r\n    width: \"100%\",\r\n    maxWidth: \"1300px\",\r\n    marginLeft: \"auto\",\r\n    marginRight: \"auto\",\r\n  },\r\n\r\n  avatar: {\r\n    display: \"block\",\r\n    overflow: \"hidden\",\r\n    textOverflow: \"ellipsis\",\r\n    height: 50,\r\n    width: 50,\r\n    minWidth: 50,\r\n    borderRadius: 50,\r\n    marginRight: 5,\r\n    border: `1px solid rgb(0 0 0 / 15%)`,\r\n    // \"@media (max-width: 768px)\": {\r\n    //   marginLeft: 7,\r\n    // },\r\n  },\r\n\r\n  name: {\r\n    fontSize: 26,\r\n    textAlign: \"right\",\r\n    marginRight: 5,\r\n    marginLeft: 5,\r\n  },\r\n\r\n  formControl: {\r\n    border: \"1px solid #d5dae2\",\r\n    padding: \"15px 20px\",\r\n    marginBottom: \"20px\",\r\n    minHeight: \"15px\",\r\n    fontSize: \"13px\",\r\n    fontWeight: \"normal\",\r\n    width: 350,\r\n  },\r\n\r\n  buttonRow: {\r\n    marginTop: 10,\r\n    \"@media (max-width: 768px)\": {\r\n      marginTop: 0,\r\n    },\r\n  },\r\n  lastRow: {\r\n    marginTop: 30,\r\n  },\r\n\r\n  rowC: {\r\n    display: \"flex\",\r\n    flexDirection: \"row\",\r\n    width: \"100%\",\r\n    alignItems: \"center\",\r\n  },\r\n\r\n  profile: {\r\n    maxWidth: \"800px\",\r\n    margin: \"auto\",\r\n    marginTop: \"20px\",\r\n  },\r\n\r\n  rowLast: {\r\n    display: \"block !important\",\r\n    width: \"100%\",\r\n  },\r\n  customRow: {\r\n    display: \"grid !important\",\r\n    gridTemplateColumns: \"80% 20%\",\r\n    \"@media (max-width: 780px)\": {\r\n      display: \"block !important\",\r\n      gridTemplateColumns: \"unset\",\r\n    },\r\n  },\r\n  formGroupList: {\r\n    display: \"grid !important\",\r\n    gridTemplateColumns: \"1fr 1fr\",\r\n    gridGap: \"15px\",\r\n    \"@media (max-width: 780px)\": {\r\n      display: \"block !important\",\r\n      gridTemplateColumns: \"unset\",\r\n    },\r\n  },\r\n});\r\n\r\nfunction ProfileSettings() {\r\n  const classes = useStyles();\r\n  const [user, setUser] = useState([]);\r\n  const [values, setValues] = useState({});\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [response, setResponse] = useState({\r\n    error: false,\r\n    message: \"\",\r\n  });\r\n\r\n  useEffect(() => {\r\n    getUser();\r\n  }, []);\r\n\r\n  const token = sessionStorage.getItem(\"xrsf\");\r\n  const api = \"http://localhost:8000/api/user\";\r\n  const config = {\r\n    headers: { Authorization: `Bearer ${token}` },\r\n  };\r\n\r\n  const getUser = async () => {\r\n    setIsLoading(true);\r\n    await axios\r\n      .get(api, config)\r\n      .then((res) => {\r\n        console.log(res.data);\r\n        const response = {\r\n          errors: false,\r\n          message: \"Profile Successfully Updated\",\r\n        };\r\n        setUser(res.data);\r\n        setResponse(response);\r\n        setIsLoading(false);\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n        setIsLoading(false);\r\n      });\r\n  };\r\n\r\n  const putApi = `http://localhost:8000/api/users/${user.id}`;\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    await axios\r\n      .put(putApi, values)\r\n      .then((res) => {\r\n        console.log(res.data);\r\n        setValues({\r\n          password: \"\",\r\n          new_password: \"\",\r\n          conf_password: \"\",\r\n        });\r\n        getUser();\r\n      })\r\n      .catch((err) => {\r\n        const error = err.response.data;\r\n        if (error.type === \"password\") {\r\n          if (error.errors.conf_password) {\r\n            setResponse({\r\n              error: true,\r\n              message: error.errors.conf_password[0],\r\n            });\r\n          }\r\n          if (error.errors.new_password) {\r\n            setResponse({\r\n              error: true,\r\n              message: error.errors.new_password[0],\r\n            });\r\n          }\r\n          if (error.errors.password) {\r\n            setResponse({\r\n              error: true,\r\n              message: error.errors.password[0],\r\n            });\r\n          }\r\n        }\r\n        if (error.type === \"email\") {\r\n          setResponse({\r\n            error: true,\r\n            message: error.errors,\r\n          });\r\n        } else {\r\n          setResponse({\r\n            error: true,\r\n            message: error.errors,\r\n          });\r\n        }\r\n      });\r\n  };\r\n\r\n  const handleInput = (e) => {\r\n    const { name, value } = e.target;\r\n    setValues({\r\n      ...values,\r\n      [name]: value,\r\n    });\r\n    setResponse({});\r\n  };\r\n\r\n  return !isLoading ? (\r\n    <div className={classes.rowLast}>\r\n      <Row className={classes.customRow}>\r\n        <Column>\r\n          <div className={classes.rowC}>\r\n            <Gravatar\r\n              email={user.email}\r\n              size={100}\r\n              rating=\"pg\"\r\n              default=\"retro\"\r\n              className=\"CustomAvatar-image\"\r\n              protocol=\"https://\"\r\n              className={classes.avatar}\r\n            />\r\n            <span className={classes.name}>{user.name}</span>\r\n          </div>\r\n        </Column>\r\n        <Column\r\n          className={classes.container}\r\n          vertical=\"center\"\r\n          horizontal=\"end\"\r\n        >\r\n          <CreateButton form=\"profile-form\" label=\"Update Profile\" />\r\n        </Column>\r\n      </Row>\r\n      <Row className={classes.rowLast}>\r\n        <Input type=\"hidden\" value=\"prayer\" />\r\n        <div>\r\n          <form\r\n            id=\"profile-form\"\r\n            className={classes.profile}\r\n            onSubmit={handleSubmit}\r\n          >\r\n            <h2>Update Profile</h2>\r\n            {response.error && <p>{response.message}</p>}\r\n            {!response.error && <p>{response.message}</p>}\r\n            <FormGroup>\r\n              <div className={classes.formGroupList}>\r\n                <div>\r\n                  <label>Full Name</label>\r\n                  <input type=\"hidden\" value=\"something\" />\r\n                  <Input\r\n                    type=\"text\"\r\n                    name=\"name\"\r\n                    autoComplete=\"off\"\r\n                    defaultValue={user.name}\r\n                    onChange={handleInput}\r\n                  />\r\n                </div>\r\n                <div>\r\n                  <label>Email</label>\r\n                  <Input\r\n                    type=\"email\"\r\n                    name=\"email\"\r\n                    autoComplete=\"user-email\"\r\n                    defaultValue={user.email}\r\n                    onChange={handleInput}\r\n                  />\r\n                </div>\r\n              </div>\r\n              <label>Current Password</label>\r\n              <Input\r\n                required\r\n                type=\"password\"\r\n                name=\"password\"\r\n                value={values.password}\r\n                autoComplete=\"old-password\"\r\n                onChange={handleInput}\r\n              />\r\n              <div className={classes.formGroupList}>\r\n                <div>\r\n                  <label>New Password</label>\r\n                  <Input\r\n                    type=\"password\"\r\n                    name=\"new_password\"\r\n                    autoComplete=\"new-password\"\r\n                    value={values.new_password}\r\n                    onChange={handleInput}\r\n                  />\r\n                </div>\r\n                <div>\r\n                  <label>Repeat Password</label>\r\n                  <Input\r\n                    type=\"password\"\r\n                    name=\"conf_password\"\r\n                    autoComplete=\"conf-password\"\r\n                    value={values.conf_password}\r\n                    onChange={handleInput}\r\n                  />\r\n                </div>\r\n              </div>\r\n            </FormGroup>\r\n          </form>\r\n        </div>\r\n      </Row>\r\n    </div>\r\n  ) : (\r\n    <div>Loading...</div>\r\n  );\r\n}\r\n\r\nexport default ProfileSettings;\r\n"]},"metadata":{},"sourceType":"module"}