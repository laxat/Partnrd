{"ast":null,"code":"import _defineProperty from\"C:/xampp/htdocs/Partnr/partnrd/partnrd_frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"C:/xampp/htdocs/Partnr/partnrd/partnrd_frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"C:/xampp/htdocs/Partnr/partnrd/partnrd_frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useState,useEffect}from\"react\";import axios from\"axios\";import{useHistory}from\"react-router-dom/cjs/react-router-dom.min\";/**\r\n * User Signup function, uses api to validate user looking to register \r\n * and adds them to the database.\r\n * \r\n * @param {*} validate \r\n * @returns \r\n */export var useSignup=function useSignup(validate){var _useState=useState({name:\"\",email:\"\",password:\"\",password2:\"\"}),_useState2=_slicedToArray(_useState,2),values=_useState2[0],setValues=_useState2[1];var type=useState({name:\"\"});var _useState3=useState({error:false,message:\"\"}),_useState4=_slicedToArray(_useState3,2),response=_useState4[0],setResponse=_useState4[1];var _useState5=useState({}),_useState6=_slicedToArray(_useState5,2),errors=_useState6[0],setErrors=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),isSubmitting=_useState8[0],setIsSubmitting=_useState8[1];var _useState9=useState({state:false,message:\"\"}),_useState10=_slicedToArray(_useState9,2),success=_useState10[0],setSuccess=_useState10[1];var handleRegisterChange=function handleRegisterChange(e){var _e$target=e.target,name=_e$target.name,value=_e$target.value;setValues(_objectSpread(_objectSpread({},values),{},_defineProperty({},name,value)));};var handleSubmit=function handleSubmit(e){e.preventDefault();var response={error:false,message:errors};setResponse(response);setErrors(validate(values));setIsSubmitting(true);};useEffect(function(){if(Object.keys(errors).length===0&&isSubmitting){var data=values;axios.post(\"http://127.0.0.1:8000/api/client/register\",data).then(function(res){var success={state:true,message:\"Email Verification email sent\"};setSuccess(success);}).catch(function(err){var error=err.response.data;var s=Object.values(error.errors);s.join(\" \");var response={error:true,message:s};setResponse(response);setIsSubmitting(false);});}// eslint-disable-next-line react-hooks/exhaustive-deps\n},[errors]);return{handleRegisterChange:handleRegisterChange,values:values,handleSubmit:handleSubmit,errors:errors,response:response,success:success};};/**\r\n * User Login logic, uses axios to post data to the server,\r\n * Validation is performed client side and server side. \r\n * Authentication is performed server side and messages are posted\r\n * to the front-end to display in the application. \r\n * @param {*} validate \r\n * @returns \r\n */export var useLogin=function useLogin(validate){var _useState11=useState({email:\"\",password:\"\"}),_useState12=_slicedToArray(_useState11,2),fields=_useState12[0],setValues=_useState12[1];var _useState13=useState({error:false,message:\"\"}),_useState14=_slicedToArray(_useState13,2),response=_useState14[0],setResponse=_useState14[1];var _useState15=useState({}),_useState16=_slicedToArray(_useState15,2),errors=_useState16[0],setErrors=_useState16[1];var _useState17=useState(false),_useState18=_slicedToArray(_useState17,2),isSubmitting=_useState18[0],setIsSubmitting=_useState18[1];var history=useHistory();var handleLoginChange=function handleLoginChange(e){var _e$target2=e.target,name=_e$target2.name,value=_e$target2.value;setValues(_objectSpread(_objectSpread({},fields),{},_defineProperty({},name,value)));};var handleSubmit=function handleSubmit(e){e.preventDefault();var response={error:false,message:errors};setResponse(response);setErrors(validate(fields));setIsSubmitting(true);};useEffect(function(){if(Object.keys(errors).length===0&&isSubmitting){var data=fields;axios.post(\"http://127.0.0.1:8000/api/login\",data).then(function(res){localStorage.setItem(\"token\",res.data.token);localStorage.setItem(\"user\",res.data.token);history.push(\"/\");}).catch(function(err){var errors=\"\";if(err.response.data.errors.email){errors=err.response.data.errors.email;}else{errors=err.response.data.errors;}var response={error:true,message:errors};setResponse(response);setIsSubmitting(false);});}// eslint-disable-next-line react-hooks/exhaustive-deps\n},[errors]);return{handleLoginChange:handleLoginChange,fields:fields,handleSubmit:handleSubmit,errors:errors,response:response};};export var useEmail=function useEmail(validate){var _useState19=useState({email:\"\"}),_useState20=_slicedToArray(_useState19,2),fields=_useState20[0],setValues=_useState20[1];var _useState21=useState({}),_useState22=_slicedToArray(_useState21,2),errors=_useState22[0],setErrors=_useState22[1];var _useState23=useState(false),_useState24=_slicedToArray(_useState23,2),isSubmitting=_useState24[0],setIsSubmitting=_useState24[1];var _useState25=useState({error:false,message:\"\"}),_useState26=_slicedToArray(_useState25,2),response=_useState26[0],setResponse=_useState26[1];var _useState27=useState({state:false,message:\"\"}),_useState28=_slicedToArray(_useState27,2),success=_useState28[0],setSuccess=_useState28[1];var handleEmailChange=function handleEmailChange(e){var _e$target3=e.target,name=_e$target3.name,value=_e$target3.value;setValues(_objectSpread(_objectSpread({},fields),{},_defineProperty({},name,value)));};var handleSubmit=function handleSubmit(e){e.preventDefault();var response={error:false,message:errors};setResponse(response);setErrors(validate(fields));setIsSubmitting(true);};useEffect(function(){if(Object.keys(errors).length===0&&isSubmitting){var data=fields;axios.post(\"http://127.0.0.1:8000/api/password/email\",data).then(function(res){var success={state:true,message:res.message};setSuccess(success);}).catch(function(err){var errors;if(err.response.data.errors.email){errors=err.response.data.errors.email[0];}else{errors=err.response.data.errors;}var response={error:true,message:errors};console.log(errors);setResponse(response);setIsSubmitting(false);});}// eslint-disable-next-line react-hooks/exhaustive-deps\n},[errors]);return{handleEmailChange:handleEmailChange,fields:fields,handleSubmit:handleSubmit,errors:errors,response:response,success:success};};var getToken=function getToken(){var params=new URLSearchParams(window.location.search);if(params.has(\"token\")){return params.get(\"token\");}return\"\";};var getUserId=function getUserId(){var params=new URLSearchParams(window.location.search);if(params.has(\"id\")){return params.get(\"id\");}return\"\";};export var useResetPassword=function useResetPassword(validate){var _useState29=useState({id:getUserId(),token:getToken(),password:\"\",password_confirmation:\"\"}),_useState30=_slicedToArray(_useState29,2),fields=_useState30[0],setValues=_useState30[1];var _useState31=useState({}),_useState32=_slicedToArray(_useState31,2),errors=_useState32[0],setErrors=_useState32[1];var _useState33=useState(false),_useState34=_slicedToArray(_useState33,2),isSubmitting=_useState34[0],setIsSubmitting=_useState34[1];var _useState35=useState({error:false,message:\"\"}),_useState36=_slicedToArray(_useState35,2),response=_useState36[0],setResponse=_useState36[1];var _useState37=useState({state:false,message:\"\"}),_useState38=_slicedToArray(_useState37,2),success=_useState38[0],setSuccess=_useState38[1];var handleChange=function handleChange(e){var _e$target4=e.target,name=_e$target4.name,value=_e$target4.value;setValues(_objectSpread(_objectSpread({},fields),{},_defineProperty({},name,value)));};var handleSubmit=function handleSubmit(e){e.preventDefault();var response={error:false,message:errors};setResponse(response);setErrors(validate(fields));setIsSubmitting(true);};useEffect(function(){if(Object.keys(errors).length===0&&isSubmitting){var data=fields;axios.post(\"http://127.0.0.1:8000/api/password/reset\",data).then(function(res){var success={state:true,message:res.message};console.log(success);setSuccess(success);}).catch(function(err){var errors=err.response.data.errors;var response={error:true,message:errors};console.log(errors);setResponse(response);setIsSubmitting(false);});}// eslint-disable-next-line react-hooks/exhaustive-deps\n},[errors]);return{handleChange:handleChange,fields:fields,handleSubmit:handleSubmit,errors:errors,response:response,success:success};};","map":{"version":3,"sources":["C:/xampp/htdocs/Partnr/partnrd/partnrd_frontend/src/components/ClientAuth/useAuth.js"],"names":["useState","useEffect","axios","useHistory","useSignup","validate","name","email","password","password2","values","setValues","type","error","message","response","setResponse","errors","setErrors","isSubmitting","setIsSubmitting","state","success","setSuccess","handleRegisterChange","e","target","value","handleSubmit","preventDefault","Object","keys","length","data","post","then","res","catch","err","s","join","useLogin","fields","history","handleLoginChange","localStorage","setItem","token","push","useEmail","handleEmailChange","console","log","getToken","params","URLSearchParams","window","location","search","has","get","getUserId","useResetPassword","id","password_confirmation","handleChange"],"mappings":"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","sourcesContent":["import { useState, useEffect } from \"react\";\r\nimport axios from \"axios\";\r\nimport { useHistory } from \"react-router-dom/cjs/react-router-dom.min\";\r\n\r\n/**\r\n * User Signup function, uses api to validate user looking to register \r\n * and adds them to the database.\r\n * \r\n * @param {*} validate \r\n * @returns \r\n */\r\n\r\nexport const useSignup = (validate) =>\r\n{\r\n    const [values, setValues] = useState({\r\n    name: \"\",\r\n    email: \"\",\r\n    password: \"\",\r\n    password2: \"\",\r\n    });\r\n  \r\n  const type = useState({\r\n    name: \"\"\r\n  })  \r\n  const [response, setResponse] = useState({\r\n    error: false,\r\n    message: \"\",\r\n  });\r\n\r\n  const [errors, setErrors] = useState({});\r\n  \r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n  const [success, setSuccess] = useState({\r\n    state: false,\r\n    message: \"\",\r\n  });\r\n\r\n  const handleRegisterChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setValues({\r\n        ...values,\r\n      [name]:value,\r\n    });\r\n  };\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    const response = {\r\n      error: false,\r\n      message: errors,\r\n    };\r\n    setResponse(response);\r\n    setErrors(validate(values));\r\n\r\n    setIsSubmitting(true);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (Object.keys(errors).length === 0 && isSubmitting) {\r\n      const data = values;\r\n      axios\r\n        .post(\"http://127.0.0.1:8000/api/client/register\", data)\r\n        .then((res) => {\r\n          const success = {\r\n            state: true,\r\n            message: \"Email Verification email sent\",\r\n          };\r\n          setSuccess(success);\r\n        })\r\n        .catch((err) => {\r\n          const error = err.response.data;\r\n          const s = Object.values(error.errors);\r\n          s.join(\" \");\r\n          const response = {\r\n            error: true,\r\n            message: s,\r\n          };\r\n          setResponse(response);\r\n          setIsSubmitting(false);\r\n        });\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [errors]);\r\n\r\n  return {\r\n    handleRegisterChange,\r\n    values,\r\n    handleSubmit,\r\n    errors,\r\n    response,\r\n    success\r\n  };\r\n};\r\n\r\n/**\r\n * User Login logic, uses axios to post data to the server,\r\n * Validation is performed client side and server side. \r\n * Authentication is performed server side and messages are posted\r\n * to the front-end to display in the application. \r\n * @param {*} validate \r\n * @returns \r\n */\r\n\r\nexport const useLogin = (validate) =>\r\n{\r\n  const [fields, setValues] = useState({\r\n    email: \"\",\r\n    password: \"\",\r\n  });\r\n\r\n  const [response, setResponse] = useState({\r\n    error: false,\r\n    message: \"\",\r\n  });\r\n\r\n  const [errors, setErrors] = useState({});\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n  const history = useHistory();\r\n\r\n  const handleLoginChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setValues({\r\n      ...fields,\r\n      [name]: value,\r\n    });\r\n  };\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    const response = {\r\n      error: false,\r\n      message: errors,\r\n    };\r\n    setResponse(response);\r\n    setErrors(validate(fields));\r\n\r\n    setIsSubmitting(true);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (Object.keys(errors).length === 0 && isSubmitting) {\r\n      const data = fields;\r\n      axios\r\n        .post(\"http://127.0.0.1:8000/api/login\", data)\r\n        .then((res) => {\r\n          localStorage.setItem(\"token\", res.data.token);\r\n          localStorage.setItem(\"user\", res.data.token);\r\n          history.push(\"/\");\r\n        })\r\n        .catch((err) => {\r\n          let errors = \"\";\r\n          if (err.response.data.errors.email) {\r\n            errors = err.response.data.errors.email;\r\n          } else {\r\n            errors = err.response.data.errors;\r\n          }\r\n          const response = {\r\n            error: true,\r\n            message: errors,\r\n          };\r\n          setResponse(response);\r\n          setIsSubmitting(false);\r\n        });\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [errors]);\r\n\r\n  return { handleLoginChange, fields, handleSubmit, errors, response };\r\n};\r\n\r\n\r\nexport const useEmail = (validate) => {\r\n  const [fields, setValues] = useState({\r\n    email: \"\",\r\n  });\r\n\r\n  const [errors, setErrors] = useState({});\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n  const [response, setResponse] = useState({\r\n    error: false,\r\n    message: \"\",\r\n  });\r\n\r\n  const [success, setSuccess] = useState({\r\n    state: false,\r\n    message: \"\",\r\n  });\r\n\r\n  const handleEmailChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setValues({\r\n      ...fields,\r\n      [name]: value,\r\n    });\r\n  };\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    const response = {\r\n      error: false,\r\n      message: errors,\r\n    };\r\n    setResponse(response);\r\n    setErrors(validate(fields));\r\n    setIsSubmitting(true);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (Object.keys(errors).length === 0 && isSubmitting) {\r\n      const data = fields;\r\n      axios\r\n        .post(\"http://127.0.0.1:8000/api/password/email\", data)\r\n        .then((res) => {\r\n          const success = {\r\n            state: true,\r\n            message: res.message,\r\n          };\r\n          setSuccess(success);\r\n        })\r\n        .catch((err) => {\r\n          let errors;\r\n          if (err.response.data.errors.email) {\r\n            errors = err.response.data.errors.email[0]; \r\n          }\r\n          else {\r\n            errors = err.response.data.errors;\r\n          }\r\n\r\n          const response = {\r\n            error: true,\r\n            message: errors,\r\n          };\r\n\r\n          console.log(errors)\r\n          setResponse(response);\r\n          setIsSubmitting(false);\r\n        });\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [errors]);\r\n\r\n  return {\r\n    handleEmailChange,\r\n    fields,\r\n    handleSubmit,\r\n    errors,\r\n    response,\r\n    success,\r\n  };\r\n};\r\n\r\nconst getToken = () => {\r\n  const params = new URLSearchParams(window.location.search);\r\n  if (params.has(\"token\")) {\r\n    return params.get(\"token\");\r\n  }\r\n  return \"\";\r\n};\r\n\r\nconst getUserId = () => {\r\n  const params = new URLSearchParams(window.location.search);\r\n  if (params.has(\"id\")) {\r\n    return params.get(\"id\");\r\n  }\r\n  return \"\";\r\n};\r\n\r\nexport const useResetPassword = (validate) => {\r\n  const [fields, setValues] = useState({\r\n    id: getUserId(),\r\n    token: getToken(),\r\n    password: \"\",\r\n    password_confirmation: \"\",\r\n  });\r\n\r\n  const [errors, setErrors] = useState({});\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n  const [response, setResponse] = useState({\r\n    error: false,\r\n    message: \"\",\r\n  });\r\n\r\n  const [success, setSuccess] = useState({\r\n    state: false,\r\n    message: \"\",\r\n  });\r\n\r\n  const handleChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setValues({\r\n      ...fields,\r\n      [name]: value,\r\n    });\r\n  };\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    const response = {\r\n      error: false,\r\n      message: errors,\r\n    };\r\n    setResponse(response);\r\n    setErrors(validate(fields));\r\n    setIsSubmitting(true);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (Object.keys(errors).length === 0 && isSubmitting) {\r\n      const data = fields;\r\n      axios\r\n        .post(\"http://127.0.0.1:8000/api/password/reset\", data)\r\n        .then((res) => {\r\n          const success = {\r\n            state: true,\r\n            message: res.message,\r\n          };\r\n          console.log(success);\r\n          setSuccess(success);\r\n        })\r\n        .catch((err) => {\r\n          let errors = err.response.data.errors;\r\n\r\n          const response = {\r\n            error: true,\r\n            message: errors,\r\n          };\r\n\r\n          console.log(errors);\r\n          setResponse(response);\r\n          setIsSubmitting(false);\r\n        });\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [errors]);\r\n\r\n  return {\r\n    handleChange,\r\n    fields,\r\n    handleSubmit,\r\n    errors,\r\n    response,\r\n    success,\r\n  };\r\n};\r\n\r\n\r\n\r\n"]},"metadata":{},"sourceType":"module"}