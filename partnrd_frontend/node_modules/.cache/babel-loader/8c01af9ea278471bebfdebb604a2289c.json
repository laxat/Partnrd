{"ast":null,"code":"import _regeneratorRuntime from\"C:/xampp/htdocs/Partnr/partnrd/partnrd_frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/xampp/htdocs/Partnr/partnrd/partnrd_frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/xampp/htdocs/Partnr/partnrd/partnrd_frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from\"react\";import{Column,Row}from\"simple-flexbox\";import CreateButton from\"../../../components/CreateButton\";import{createUseStyles}from\"react-jss\";import axios from\"axios\";import{useHistory}from\"react-router-dom\";import{Paper}from\"@material-ui/core\";import{useParams}from\"react-router\";import{CircularProgress}from\"@material-ui/core\";import SLUGS from\"../../../resources/slugs\";import{Beginning,Recitals,Articles,Article2,Article4,Article6,Article7,Article8,Article10,Article10b,Article9}from\"./SharePages\";import{DeleteDialog,EditDialog}from\"./Info\";import{PDFExport,savePDF}from\"@progress/kendo-react-pdf\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var useStyles=createUseStyles({lastRow:{marginTop:10},paperStyle:{background:\"white\",padding:40,marginBottom:50,marginTop:20,boxShadow:\"unset !important\",border:\"1px solid #d8d8d8\"},container:{width:\"100%\",maxWidth:\"1300px\",marginLeft:\"auto\",marginRight:\"auto\"},buttonRow:{marginTop:10},title:{marginTop:10,color:\"#000\",fontSize:\"30px\"},paragraph:{whiteSpace:\"pre-line\"},rowC:{display:\"flex\",flexDirection:\"row\"},rowBtn:{marginRight:\"15px !important\"}});export function CreateShareAgreement(){var _useParams=useParams(),id=_useParams.id;var _useHistory=useHistory(),push=_useHistory.push;var classes=useStyles();var token=sessionStorage.getItem(\"xrsf\");var config={headers:{Authorization:\"Bearer \".concat(token)}};var api=\"\".concat(process.env.REACT_APP_API,\"/api/agreements/\").concat(id);var _useState=useState([]),_useState2=_slicedToArray(_useState,2),formData=_useState2[0],setFormData=_useState2[1];var _useState3=useState({loading:false}),_useState4=_slicedToArray(_useState3,2),isLoading=_useState4[0],setIsLoading=_useState4[1];var pdfExportComponent=React.useRef(null);var handleExportWithComponent=function handleExportWithComponent(e){pdfExportComponent.current.save();};useEffect(function(){getData();},[]);var getData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setIsLoading(true);_context.next=3;return axios.get(api,config).then(function(res){setFormData(res.data);console.log(res);setIsLoading(false);}).catch(function(err){console.log(err);push(SLUGS.agreements);});case 3:case\"end\":return _context.stop();}}},_callee);}));return function getData(){return _ref.apply(this,arguments);};}();var name=\"Sign & Download\";return!isLoading?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Column,{className:[classes.container,classes.title].join(\" \"),horizontal:\"start\",children:formData&&formData[0]&&/*#__PURE__*/_jsx(\"h1\",{children:formData[0].name})}),/*#__PURE__*/_jsx(Column,{className:classes.container,vertical:\"center\",horizontal:\"end\",children:/*#__PURE__*/_jsxs(\"div\",{className:classes.rowC,children:[/*#__PURE__*/_jsxs(\"div\",{className:[classes.rowC,classes.rowBtn].join(\" \"),children:[/*#__PURE__*/_jsx(EditDialog,{api:api,config:config,agreeName:formData[0].name,getData:getData}),/*#__PURE__*/_jsx(DeleteDialog,{config:config,api:api})]}),/*#__PURE__*/_jsx(CreateButton,{label:name,onClick:handleExportWithComponent})]})})]}),/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Row,{className:classes.lastRow,children:/*#__PURE__*/_jsx(DisplayData,{data:formData,pdfExportComponent:pdfExportComponent})})})]}):/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(CircularProgress,{color:\"black\"})});}function DisplayData(_ref2){var data=_ref2.data,pdfExportComponent=_ref2.pdfExportComponent;var createdDate=data[0].created_at;var classes=useStyles();var val=JSON.parse(data[0].data);var corpName=val.companyName;var corpPlace=val.companyPlace;var corpDate=val.companyDate;var corpFax=val.companyFax;var corpContact=val.companyContact;var optOut=val.optOut;var control=val.control;var shareData=[];var personData=[];var founderData=[];var directorData=[];val.shareInfo.map(function(x,i){return shareData[i]={shareID:x.shareID,shareName:x.shareName,shareClass:x.shareClass,shareType:x.shareType,shareTotal:x.shareTotal};});val.founderInfo.map(function(x,i){return personData[i]={ID:x.personID,name:{fname:x.fname,prefName:x.preferredName},phone:x.phone,email:x.email,address:[x.streetName,x.provinceName,x.cityName,x.postalCode],IsCompany:[x.role,x.corpName],IsBoard:x.onBoard,shareinfo:x.shareinfo};});val.founderInfo.map(function(x,i){if(x.role===\"Founder\"){founderData.push({ID:x.personID,name:{fname:x.fname,prefName:x.preferredName},phone:x.phone,email:x.email,address:[x.streetName,x.provinceName,x.cityName,x.postalCode],IsCompany:[x.role,x.corpName],IsBoard:x.onBoard,shareinfo:x.shareinfo});}});if(!optOut){val.directInfo.map(function(x,i){return directorData[i]={ID:x.personID,name:x.name,nominee:x.nominee,shareinfo:x.shareinfo};});}return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(PDFExport,{paperSize:\"A4\",ref:pdfExportComponent,children:[/*#__PURE__*/_jsxs(Paper,{className:classes.paperStyle,children:[/*#__PURE__*/_jsx(Beginning,{corpName:corpName,corpData:corpDate,corpPlace:corpPlace,personData:personData}),/*#__PURE__*/_jsx(Recitals,{}),/*#__PURE__*/_jsx(Articles,{corpPlace:corpPlace,shareData:shareData,founderData:founderData,majControl:control})]}),/*#__PURE__*/_jsx(Paper,{className:classes.paperStyle,children:/*#__PURE__*/_jsx(Article2,{})}),/*#__PURE__*/_jsx(Paper,{className:classes.paperStyle,children:/*#__PURE__*/_jsx(Article4,{directorData:directorData,shareData:shareData,optOut:optOut})}),/*#__PURE__*/_jsx(Paper,{className:classes.paperStyle,children:/*#__PURE__*/_jsx(Article6,{createdDate:createdDate})}),/*#__PURE__*/_jsx(Paper,{className:classes.paperStyle,children:/*#__PURE__*/_jsx(Article7,{})}),/*#__PURE__*/_jsx(Paper,{className:classes.paperStyle,children:/*#__PURE__*/_jsx(Article8,{})}),/*#__PURE__*/_jsx(Paper,{className:classes.paperStyle,children:/*#__PURE__*/_jsx(Article9,{})}),/*#__PURE__*/_jsx(Paper,{className:classes.paperStyle,children:/*#__PURE__*/_jsx(Article10,{})}),/*#__PURE__*/_jsx(Paper,{className:classes.paperStyle,children:/*#__PURE__*/_jsx(Article10b,{corpName:corpName,corpContact:corpContact,corpFax:corpFax})})]})});}export var ShareDoc=function ShareDoc(_ref3){var data=_ref3.data,pdfExportComponent=_ref3.pdfExportComponent;var createdDate=data[0].created_at;var classes=useStyles();var val=JSON.parse(data[0].data);var corpName=val.companyName;var corpPlace=val.companyPlace;var corpDate=val.companyDate;var corpFax=val.companyFax;var corpContact=val.companyContact;var shareData=[];var personData=[];var founderData=[];var directorData=[];val.shareInfo.map(function(x,i){return shareData[i]={shareID:x.shareID,shareName:x.shareName,shareClass:x.shareClass,shareType:x.shareType,shareTotal:x.shareTotal};});val.founderInfo.map(function(x,i){return personData[i]={name:{fname:x.fname,prefName:x.preferredName},phone:x.phone,email:x.email,address:[x.streetName,x.provinceName,x.cityName,x.postalCode],IsCompany:[x.role,x.corpName],Ownership:x.shareinfo,IsBoard:x.onBoard,shareinfo:x.shareinfo};});val.founderInfo.map(function(x,i){if(x.role===\"Founder\"){founderData.push({name:{fname:x.fname,prefName:x.preferredName},phone:x.phone,email:x.email,address:[x.streetName,x.provinceName,x.cityName,x.postalCode],IsCompany:[x.role,x.corpName],Ownership:x.shareinfo,IsBoard:x.onBoard,shareinfo:x.shareinfo});}});val.directInfo.map(function(x,i){return directorData[i]={name:x.name,nominee:x.nominee,shareinfo:x.shareinfo};});return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(PDFExport,{paperSize:\"A4\",margin:\"1cm\",ref:pdfExportComponent,children:[/*#__PURE__*/_jsx(Beginning,{corpName:corpName,corpData:corpDate,corpPlace:corpPlace,personData:personData}),/*#__PURE__*/_jsx(Recitals,{}),/*#__PURE__*/_jsx(Articles,{corpPlace:corpPlace,shareData:shareData,founderData:founderData,classes:classes})]})});};// const Show = (pdfExportComponent) => {\n//   pdfExportComponent.current.save();\n// };","map":{"version":3,"sources":["C:/xampp/htdocs/Partnr/partnrd/partnrd_frontend/src/pages/Templates/ShareAgreement/CreateShareAgreement.js"],"names":["React","useEffect","useState","Column","Row","CreateButton","createUseStyles","axios","useHistory","Paper","useParams","CircularProgress","SLUGS","Beginning","Recitals","Articles","Article2","Article4","Article6","Article7","Article8","Article10","Article10b","Article9","DeleteDialog","EditDialog","PDFExport","savePDF","useStyles","lastRow","marginTop","paperStyle","background","padding","marginBottom","boxShadow","border","container","width","maxWidth","marginLeft","marginRight","buttonRow","title","color","fontSize","paragraph","whiteSpace","rowC","display","flexDirection","rowBtn","CreateShareAgreement","id","push","classes","token","sessionStorage","getItem","config","headers","Authorization","api","process","env","REACT_APP_API","formData","setFormData","loading","isLoading","setIsLoading","pdfExportComponent","useRef","handleExportWithComponent","e","current","save","getData","get","then","res","data","console","log","catch","err","agreements","name","join","DisplayData","createdDate","created_at","val","JSON","parse","corpName","companyName","corpPlace","companyPlace","corpDate","companyDate","corpFax","companyFax","corpContact","companyContact","optOut","control","shareData","personData","founderData","directorData","shareInfo","map","x","i","shareID","shareName","shareClass","shareType","shareTotal","founderInfo","ID","personID","fname","prefName","preferredName","phone","email","address","streetName","provinceName","cityName","postalCode","IsCompany","role","IsBoard","onBoard","shareinfo","directInfo","nominee","ShareDoc","Ownership"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { Column, Row } from \"simple-flexbox\";\r\nimport CreateButton from \"../../../components/CreateButton\";\r\nimport { createUseStyles } from \"react-jss\";\r\nimport axios from \"axios\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { Paper } from \"@material-ui/core\";\r\nimport { useParams } from \"react-router\";\r\nimport { CircularProgress } from \"@material-ui/core\";\r\nimport SLUGS from \"../../../resources/slugs\";\r\nimport {\r\n  Beginning,\r\n  Recitals,\r\n  Articles,\r\n  Article2,\r\n  Article4,\r\n  Article6,\r\n  Article7,\r\n  Article8,\r\n  Article10,\r\n  Article10b,\r\n  Article9,\r\n} from \"./SharePages\";\r\nimport { DeleteDialog, EditDialog } from \"./Info\";\r\nimport { PDFExport, savePDF } from \"@progress/kendo-react-pdf\"; \r\n\r\nconst useStyles = createUseStyles({\r\n  lastRow: {\r\n    marginTop: 10,\r\n  },\r\n\r\n  paperStyle: {\r\n    background: \"white\",\r\n    padding: 40,\r\n    marginBottom: 50,\r\n    marginTop: 20,\r\n    boxShadow: \"unset !important\",\r\n    border: `1px solid #d8d8d8`,\r\n  },\r\n  container: {\r\n    width: \"100%\",\r\n    maxWidth: \"1300px\",\r\n    marginLeft: \"auto\",\r\n    marginRight: \"auto\",\r\n  },\r\n\r\n  buttonRow: {\r\n    marginTop: 10,\r\n  },\r\n\r\n  title: {\r\n    marginTop: 10,\r\n    color: \"#000\",\r\n    fontSize: \"30px\",\r\n  },\r\n  paragraph: {\r\n    whiteSpace: \"pre-line\",\r\n  },\r\n\r\n  rowC: {\r\n    display: \"flex\",\r\n    flexDirection: \"row\",\r\n  },\r\n\r\n  rowBtn: {\r\n    marginRight: \"15px !important\",\r\n  },\r\n});\r\n\r\nexport function CreateShareAgreement() {\r\n  const { id } = useParams();\r\n  const { push } = useHistory();\r\n\r\n  const classes = useStyles();\r\n  const token = sessionStorage.getItem(\"xrsf\");\r\n  const config = {\r\n    headers: { Authorization: `Bearer ${token}` },\r\n  };\r\n  const api = `${process.env.REACT_APP_API}/api/agreements/${id}`;\r\n\r\n  const [formData, setFormData] = useState([]);\r\n  const [isLoading, setIsLoading] = useState({\r\n    loading: false,\r\n  });\r\n\r\n  const pdfExportComponent = React.useRef(null);\r\n  const handleExportWithComponent = (e) => {\r\n    pdfExportComponent.current.save(); \r\n  }\r\n  useEffect(() => {\r\n    getData();\r\n  }, []);\r\n\r\n  const getData = async () => {\r\n    setIsLoading(true);\r\n    await axios\r\n      .get(api, config)\r\n      .then((res) => {\r\n        setFormData(res.data);\r\n        console.log(res);\r\n        setIsLoading(false);\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n        push(SLUGS.agreements);\r\n      });\r\n  };\r\n\r\n  const name = \"Sign & Download\";\r\n  return !isLoading ? (\r\n    <div>\r\n      <Row>\r\n        <Column\r\n          className={[classes.container, classes.title].join(\" \")}\r\n          horizontal=\"start\"\r\n        >\r\n          {formData && formData[0] && <h1>{formData[0].name}</h1>}\r\n        </Column>\r\n        <Column\r\n          className={classes.container}\r\n          vertical=\"center\"\r\n          horizontal=\"end\"\r\n        >\r\n          <div className={classes.rowC}>\r\n            <div className={[classes.rowC, classes.rowBtn].join(\" \")}>\r\n            <EditDialog\r\n              api={api}\r\n              config={config}\r\n              agreeName={formData[0].name}\r\n              getData={getData}\r\n            />\r\n            <DeleteDialog config={config} api={api} />\r\n            </div>\r\n            <CreateButton label={name} onClick={handleExportWithComponent}/>\r\n          </div>\r\n        </Column>\r\n      </Row>\r\n      <Row>\r\n        <Row className={classes.lastRow}>\r\n          <DisplayData data={formData} pdfExportComponent={pdfExportComponent} />\r\n        </Row>\r\n      </Row>\r\n    </div>\r\n  ) : (\r\n    <div>\r\n      <CircularProgress color=\"black\" />\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction DisplayData({ data, pdfExportComponent }) {\r\n  const createdDate = data[0].created_at;\r\n  const classes = useStyles();\r\n  const val = JSON.parse(data[0].data);\r\n\r\n  const corpName = val.companyName;\r\n  const corpPlace = val.companyPlace;\r\n  const corpDate = val.companyDate;\r\n  const corpFax = val.companyFax;\r\n  const corpContact = val.companyContact;\r\n  const optOut = val.optOut;\r\n  const control = val.control;\r\n\r\n  const shareData = [];\r\n  const personData = [];\r\n  const founderData = [];\r\n  const directorData = [];\r\n\r\n  val.shareInfo.map((x, i) => {\r\n    return (shareData[i] = {\r\n      shareID: x.shareID,\r\n      shareName: x.shareName,\r\n      shareClass: x.shareClass,\r\n      shareType: x.shareType,\r\n      shareTotal: x.shareTotal,\r\n    });\r\n  });\r\n\r\n  val.founderInfo.map((x, i) => {\r\n    return (personData[i] = {\r\n      ID: x.personID,\r\n      name: {\r\n        fname: x.fname,\r\n        prefName: x.preferredName,\r\n      },\r\n      phone: x.phone,\r\n      email: x.email,\r\n      address: [x.streetName, x.provinceName, x.cityName, x.postalCode],\r\n      IsCompany: [x.role, x.corpName],\r\n      IsBoard: x.onBoard,\r\n      shareinfo: x.shareinfo,\r\n    });\r\n  });\r\n\r\n  val.founderInfo.map((x, i) => {\r\n    if (x.role === \"Founder\") {\r\n      founderData.push({\r\n        ID: x.personID,\r\n        name: {\r\n          fname: x.fname,\r\n          prefName: x.preferredName,\r\n        },\r\n        phone: x.phone,\r\n        email: x.email,\r\n        address: [x.streetName, x.provinceName, x.cityName, x.postalCode],\r\n        IsCompany: [x.role, x.corpName],\r\n        IsBoard: x.onBoard,\r\n        shareinfo: x.shareinfo,\r\n      });\r\n    }\r\n  });\r\n  if (!optOut) {\r\n    val.directInfo.map((x, i) => {\r\n      return (directorData[i] = {\r\n        ID: x.personID,\r\n        name: x.name,\r\n        nominee: x.nominee,\r\n        shareinfo: x.shareinfo,\r\n      });\r\n    });\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <PDFExport paperSize=\"A4\" ref={pdfExportComponent}>\r\n      <Paper className={classes.paperStyle}>\r\n        <Beginning\r\n          corpName={corpName}\r\n          corpData={corpDate}\r\n          corpPlace={corpPlace}\r\n          personData={personData}\r\n        />\r\n        <Recitals />\r\n        <Articles\r\n          corpPlace={corpPlace}\r\n          shareData={shareData}\r\n          founderData={founderData}\r\n          majControl={control}\r\n        />\r\n      </Paper>\r\n      <Paper className={classes.paperStyle}>\r\n        <Article2 />\r\n      </Paper>\r\n      <Paper className={classes.paperStyle}>\r\n        <Article4 directorData={directorData} shareData={shareData} optOut={optOut} />\r\n      </Paper>\r\n      <Paper className={classes.paperStyle}>\r\n        <Article6 createdDate={createdDate} />\r\n      </Paper>\r\n      <Paper className={classes.paperStyle}>\r\n        <Article7 />\r\n      </Paper>\r\n      <Paper className={classes.paperStyle}>\r\n        <Article8 />\r\n      </Paper>\r\n      <Paper className={classes.paperStyle}>\r\n        <Article9 />\r\n      </Paper>\r\n      <Paper className={classes.paperStyle}>\r\n        <Article10 />\r\n      </Paper>\r\n      <Paper className={classes.paperStyle}>\r\n        <Article10b\r\n          corpName={corpName}\r\n          corpContact={corpContact}\r\n          corpFax={corpFax}\r\n        />\r\n      </Paper>\r\n      </PDFExport>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport const ShareDoc = ({ data, pdfExportComponent }) => {\r\n  const createdDate = data[0].created_at;\r\n  const classes = useStyles();\r\n  const val = JSON.parse(data[0].data);\r\n\r\n  const corpName = val.companyName;\r\n  const corpPlace = val.companyPlace;\r\n  const corpDate = val.companyDate;\r\n  const corpFax = val.companyFax; \r\n  const corpContact = val.companyContact;\r\n\r\n  const shareData = [];\r\n  const personData = [];\r\n  const founderData = [];\r\n  const directorData = [];\r\n\r\n  val.shareInfo.map((x, i) => {\r\n    return (shareData[i] = {\r\n      shareID: x.shareID,\r\n      shareName: x.shareName,\r\n      shareClass: x.shareClass,\r\n      shareType: x.shareType,\r\n      shareTotal: x.shareTotal,\r\n    });\r\n  });\r\n\r\n  val.founderInfo.map((x, i) => {\r\n    return (personData[i] = {\r\n      name: {\r\n        fname: x.fname,\r\n        prefName: x.preferredName,\r\n      },\r\n      phone: x.phone,\r\n      email: x.email,\r\n      address: [x.streetName, x.provinceName, x.cityName, x.postalCode],\r\n      IsCompany: [x.role, x.corpName],\r\n      Ownership: x.shareinfo,\r\n      IsBoard: x.onBoard,\r\n      shareinfo: x.shareinfo,\r\n    });\r\n  });\r\n\r\n  val.founderInfo.map((x, i) => {\r\n    if (x.role === \"Founder\") {\r\n      founderData.push({\r\n        name: {\r\n          fname: x.fname,\r\n          prefName: x.preferredName,\r\n        },\r\n        phone: x.phone,\r\n        email: x.email,\r\n        address: [x.streetName, x.provinceName, x.cityName, x.postalCode],\r\n        IsCompany: [x.role, x.corpName],\r\n        Ownership: x.shareinfo,\r\n        IsBoard: x.onBoard,\r\n        shareinfo: x.shareinfo,\r\n      });\r\n    }\r\n  });\r\n\r\n  val.directInfo.map((x, i) => {\r\n    return (directorData[i] = {\r\n      name: x.name,\r\n      nominee: x.nominee,\r\n      shareinfo: x.shareinfo,\r\n    });\r\n  });\r\n\r\n   \r\n\r\n  return (\r\n    <div>\r\n      <PDFExport paperSize=\"A4\" margin=\"1cm\" ref={pdfExportComponent}>\r\n        <Beginning\r\n          corpName={corpName}\r\n          corpData={corpDate}\r\n          corpPlace={corpPlace}\r\n          personData={personData}\r\n        />\r\n        <Recitals />\r\n        <Articles\r\n          corpPlace={corpPlace}\r\n          shareData={shareData}\r\n          founderData={founderData}\r\n          classes={classes}\r\n        />\r\n      </PDFExport>\r\n    </div>\r\n  );\r\n};\r\n\r\n// const Show = (pdfExportComponent) => {\r\n//   pdfExportComponent.current.save();\r\n// };\r\n"]},"metadata":{},"sourceType":"module"}